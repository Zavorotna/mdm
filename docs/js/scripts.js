fetch("products.json").then((e=>e.json())).then((e=>{const t=document.querySelector(".catalog_container");Object.values(e).forEach((function(e){const n=document.createElement("figure"),c=document.createElement("figcaption");n.classList.add("card");const a=document.createElement("img"),r=document.createElement("picture"),l=document.createElement("h2"),o=document.createElement("p");o.classList.add("price"),r.appendChild(a),a.src=e.img,a.alt=e.alt,l.textContent=e.head,o.textContent=e.price;const d=document.createElement("div"),i=document.createElement("div");i.classList.add("color"),i.classList.add("flex"),d.classList.add("flex-between"),d.classList.add("items-center"),Object.entries(e.color).forEach((([t,n],c)=>{const a=document.createElement("label"),r=document.createElement("input"),l=document.createElement("span");r.type="radio",r.name=`color-${e.id}`,r.value=t,r.setAttribute("data-color-name",n),0===c&&(r.checked=!0),r.style.backgroundColor=t,a.appendChild(r),"#fff"==t&&a.appendChild(l),i.appendChild(a)}));const s=document.createElement("div"),u=document.createElement("label"),p=document.createElement("select");s.classList.add("size"),e.size.forEach((e=>{const t=document.createElement("option");t.value=e,t.textContent=e,p.appendChild(t)})),s.appendChild(u),s.appendChild(p);const m=document.createElement("button");document.createElement("span"),m.innerHTML='\n                    <span>в кошик</span>\n                    <svg xmlns="http://www.w3.org/2000/svg" width="13rem" height="16rem" viewBox="0 0 13 16" fill="none">\n                        <path d="M4.14821 4.11111H3.21837C2.36083 4.11111 1.64909 4.74181 1.588 5.55584L1.00424 13.3336C0.936654 14.2341 1.68602 15 2.63461 15H10.5654C11.514 15 12.2633 14.2341 12.1958 13.3336L11.612 5.55584C11.5509 4.74181 10.8392 4.11111 9.98163 4.11111H9.05178M4.14821 4.11111V2.55556C4.14821 1.69645 4.88002 1 5.78274 1H7.41726C8.31998 1 9.05178 1.69645 9.05178 2.55556V4.11111M4.14821 4.11111H9.05178" stroke="" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n                    </svg>',m.classList.add("flex"),m.addEventListener("click",(()=>{const t=n.querySelector(`input[name='color-${e.id}']:checked`).value,c=p.value,a=n.querySelector(`input[name='color-${e.id}']:checked`).getAttribute("data-color-name");cartItem={id:e.id,img:e.img,alt:e.alt,head:e.head,price:e.price,color:t,colorName:a,size:c};let r=[cartItem];localStorage.setItem("cart",JSON.stringify(r)),alert("Товар додано в кошик!")})),n.appendChild(c),c.appendChild(r),c.appendChild(l),c.appendChild(o),c.appendChild(s),c.appendChild(d),d.appendChild(i),d.appendChild(m),t.appendChild(n)}))})).catch((e=>console.error("Помилка завантаження JSON:",e)));const cartBtn=document.querySelector(".cart"),cartPopup=document.querySelector(".cart_popup"),cancelCart=document.querySelector(".cancel_cart"),darkBg=document.querySelector(".dark-bgc"),addCta=document.querySelector(".addtocart"),deleteCta=document.querySelector(".delete_cta"),cartContainer=document.querySelector(".cart-container");cartBtn.addEventListener("click",(function(e){e.preventDefault(),cartPopup.style.display="block",cartContainer.style.display="grid",darkBg.style.display="block";const t=JSON.parse(localStorage.getItem("cart"));if(console.log(t),document.querySelector("#cartData").value=JSON.stringify(t),document.querySelector("#orderWebsiteURL").value=window.location,Array.isArray(t)&&t.length>0){addCta.style.display="none";const e=t[0],n=cartPopup.querySelector(".cart_img img"),c=cartPopup.querySelector(".title_cart"),a=cartPopup.querySelector(".color_text"),r=cartPopup.querySelector(".color_circle"),l=cartPopup.querySelector(".size"),o=cartPopup.querySelector(".price");n.src=e.img,n.alt=e.alt,c.innerText=e.head,a.innerText=e.colorName,r.style.backgroundColor=`${e.color}`,l.innerText=e.size,o.innerText=e.price}else addCta.style.display="none"})),cancelCart.addEventListener("click",(function(e){e.preventDefault(),cartPopup.style.display="none",darkBg.style.display="none"})),darkBg.addEventListener("click",(function(e){e.preventDefault(),cartPopup.style.display="none",darkBg.style.display="none"})),deleteCta.addEventListener("click",(function(e){e.preventDefault(),localStorage.removeItem("cart"),addCta.style.display="block",cartContainer.style.display="none"}));const inputField=document.querySelectorAll("name"),maxLength=30,minLength=3,phoneInput=document.querySelector("#phone");phoneInput.addEventListener("input",(function(){let e=phoneInput.value.trim();const t="+380";e.startsWith(t)||(e=t+e);let n=e.replace(/[^\d+]/g,"");n.length>13&&(n=n.slice(0,13));isValidPhoneNumber(n)&&13===n.length?phoneInput.style.borderColor="green":(phoneInput.style.borderColor="red",showToast("Введіть вірний номер телефону"))}));const callMeForm=document.querySelector("form[action='sendorder.php']");function isValidPhoneNumber(e){return/^\+?(\d{2})?([(]?\d{3}[)]?)\s?[-]?\s?(?:\d{3})\s?[-]?(?:\s?\d{2})\s?[-]?(?:\s?\d{2})$/.test(e)}callMeForm.addEventListener("submit",(e=>{const t=item.querySelector("input[name='userPhone']").value.trim();if(!t||!isValidPhoneNumber(t)||t.length<13)return void e.preventDefault();let n;inputField.forEach((t=>{n=t.value.trim(),(n.length<3||n.length>30)&&(e.preventDefault(),n.length)}))}));const inputMasks=document.querySelectorAll(".inputMask");inputMasks.forEach((function(e){e.addEventListener("click",(function(){e.value||(e.value="+380")})),e.addEventListener("input",(function(){let t=e.value.replace(/[^\d+]/g,"");e.value=t,t.length>13&&(e.value=t.slice(0,13)),t.startsWith("+380")||(e.value="+380"+t.slice(3))}))}));
document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".content-slider");if(document.querySelector(".content-slider h3")){let r=[...document.querySelectorAll(".content-slider h3")],a=r[0].offsetWidth,d=!1;function t(){for(;e.firstChild;)e.removeChild(e.firstChild);for(let t=0;t<r.length;t++){const l=r[t].cloneNode(!0);e.appendChild(l)}}t(),function(){let l=0;setInterval((()=>{d||(d=!0,l-=1,e.style.transition="none",e.style.transform=`translateX(${l}px)`,Math.abs(l)>=a&&(l=0,t()),d=!1)}),20)}()}if(document.querySelector(".slider-images-1")){const u=document.querySelectorAll(".slider-images-1 img"),m=document.querySelectorAll(".slider-images-2 img");let v=0;u[0].classList.add("active"),m[0].classList.add("active"),setInterval((()=>{u[v].classList.remove("active"),m[v].classList.remove("active"),v=(v+1)%u.length,u[v].classList.add("active"),m[v].classList.add("active")}),3e3)}if(document.querySelector(".burger")){const f=document.querySelector(".dark-bgc"),y=document.querySelector(".burger"),g=document.querySelector(".nav"),L=document.querySelector(".cancel");function l(){g.style.left="-100%",f.style.display="none"}y.addEventListener("click",(function(){g.style.left="0",f.style.display="block"})),L.addEventListener("click",l),f.addEventListener("click",l)}!function(e,t,l){e.forEach((e=>{e.addEventListener("click",(function(i){i.preventDefault();e.nextElementSibling.classList.toggle(t),e.classList.toggle(l)}))}))}(document.querySelectorAll(".readmore"),"visible","readmore-active");const i=document.querySelectorAll(".nav a "),n=document.querySelectorAll("#spivpracia, #delivery, #obmin");let c=null;function s(){n.forEach((e=>e.classList.remove("visible")))}function o(){i.forEach((e=>e.classList.remove("visible")))}i.forEach((e=>{e.addEventListener("click",(function(t){const l=e.getAttribute("data-target");s(),o();const i=document.getElementById(l);i&&(c&&c.previousElementSibling&&c.previousElementSibling.classList.remove("readmore-active"),i.classList.add("visible"),i.previousElementSibling&&i.previousElementSibling.classList.add("readmore-active"),c=i)}))})),s(),o()}));